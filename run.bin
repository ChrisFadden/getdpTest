#! /usr/bin/bash

#Set variables
simHome='/home/czf41/Github/getdpTest/'

inputH5=$simHome'SimParam/output.h5'
inputMesh=$simHome'SimParam/microstrip.msh'

outputH5=$simHome'build/output.h5'
outputDat=$simHome'build/Vnode.dat'
outputPlot=$simHome'build/output.pos'

#Create Mesh
cd ./Python/
python h5toGmsh.py $inputH5 $inputMesh
cd ..

#Create environment
rm -rf build
cp -r SimParam build
cp saveFig.bin ./build/

#Run Simulations
cd ./build

#Solve the FEM problem
getdp microstrip.pro -solve EleSta_v -pos Map

#Save the Data
cd ../Python/
python saveData.py $outputH5 $outputDat 
python plotFile.py $outputH5 $outputPlot
